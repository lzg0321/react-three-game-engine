{"version":3,"file":"worker.cjs.production.min.js","sources":["../src/main/worker/shared/types.ts","../src/main/worker/worker.ts"],"sourcesContent":["import { WorldDef } from 'planck-js';\n\nexport enum WorkerMessageType {\n  INIT,\n  STEP,\n  LOGIC_FRAME,\n  ADD_BODY,\n  REMOVE_BODY,\n  SET_BODY,\n  UPDATE_BODY,\n  PHYSICS_STEP_PROCESSED,\n  READY_FOR_PHYSICS,\n}\n\nexport enum WorkerOwnerMessageType {\n  FRAME,\n  PHYSICS_STEP,\n  SYNC_BODIES,\n  BEGIN_COLLISION,\n  END_COLLISION,\n  MESSAGE,\n  INITIATED,\n}\n\nexport type Buffers = {\n  positions: Float32Array;\n  angles: Float32Array;\n};\n\nexport type ValidUUID = string | number;\n\nexport type PhysicsProps = {\n  config?: {\n    maxNumberOfDynamicObjects?: number;\n    updateRate?: number;\n  };\n  worldParams?: WorldDef;\n};\n","/* eslint-disable no-restricted-globals */\nimport { render } from 'react-nil';\nimport { PhysicsProps, WorkerMessageType } from './shared/types';\nimport { createElement } from 'react';\n\n// because of some weird react/dev/webpack/something quirk\n(self as any).$RefreshReg$ = () => {};\n(self as any).$RefreshSig$ = () => () => {};\n\nconst selfWorker = (self as unknown) as Worker;\n\nselfWorker.onmessage = (event: MessageEvent) => {\n  const { type, props = {} } = event.data as {\n    type: WorkerMessageType;\n    props: any;\n  };\n  switch (type) {\n    case WorkerMessageType.INIT:\n      const { worldParams = {}, config = {} } = props as PhysicsProps;\n      const {\n        maxNumberOfDynamicObjects = 100,\n        updateRate = 1000 / 30,\n      } = config;\n      render(\n        createElement(\n          require('./app/index').App,\n          {\n            worker: selfWorker,\n            config: {\n              maxNumberOfDynamicObjects,\n              updateRate,\n            },\n            worldParams,\n          },\n          null\n        )\n      );\n      break;\n  }\n};\n"],"names":["WorkerMessageType","WorkerOwnerMessageType","self","$RefreshReg$","$RefreshSig$","selfWorker","onmessage","event","data","props","type","INIT","worldParams","config","maxNumberOfDynamicObjects","updateRate","render","createElement","require","App","worker"],"mappings":"iBAEYA,EAYAC,6CAZZ,SAAYD,GACVA,mBACAA,mBACAA,iCACAA,2BACAA,iCACAA,2BACAA,iCACAA,uDACAA,6CATF,CAAYA,IAAAA,OAYZ,SAAYC,GACVA,qBACAA,mCACAA,iCACAA,yCACAA,qCACAA,yBACAA,6BAPF,CAAYA,IAAAA,OCRXC,KAAaC,aAAe,aAC5BD,KAAaE,aAAe,kBAAM,cAEnC,IAAMC,EAAcH,KAEpBG,EAAWC,UAAY,SAACC,SACOA,EAAMC,SAArBC,MAAAA,aAAQ,cAAdC,WAKDV,EAAkBW,WACqBF,EAAlCG,YAAAA,aAAc,OAAoBH,EAAhBI,OAAAA,aAAS,OAI/BA,EAFFC,0BAAAA,aAA4B,QAE1BD,EADFE,WAAAA,aAAa,IAAO,KAEtBC,SACEC,gBACEC,QAAQ,eAAeC,IACvB,CACEC,OAAQf,EACRQ,OAAQ,CACNC,0BAAAA,EACAC,WAAAA,GAEFH,YAAAA,GAEF"}