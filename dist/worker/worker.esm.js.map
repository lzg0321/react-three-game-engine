{"version":3,"file":"worker.esm.js","sources":["../src/main/worker/shared/types.ts","../src/main/worker/worker.ts"],"sourcesContent":["import { WorldDef } from 'planck-js';\n\nexport enum WorkerMessageType {\n  INIT,\n  STEP,\n  LOGIC_FRAME,\n  ADD_BODY,\n  REMOVE_BODY,\n  SET_BODY,\n  UPDATE_BODY,\n  PHYSICS_STEP_PROCESSED,\n  READY_FOR_PHYSICS,\n}\n\nexport enum WorkerOwnerMessageType {\n  FRAME,\n  PHYSICS_STEP,\n  SYNC_BODIES,\n  BEGIN_COLLISION,\n  END_COLLISION,\n  MESSAGE,\n  INITIATED,\n}\n\nexport type Buffers = {\n  positions: Float32Array;\n  angles: Float32Array;\n};\n\nexport type ValidUUID = string | number;\n\nexport type PhysicsProps = {\n  config?: {\n    maxNumberOfDynamicObjects?: number;\n    updateRate?: number;\n  };\n  worldParams?: WorldDef;\n};\n","/* eslint-disable no-restricted-globals */\nimport { render } from 'react-nil';\nimport { PhysicsProps, WorkerMessageType } from './shared/types';\nimport { createElement } from 'react';\n\n// because of some weird react/dev/webpack/something quirk\n(self as any).$RefreshReg$ = () => {};\n(self as any).$RefreshSig$ = () => () => {};\n\nconst selfWorker = (self as unknown) as Worker;\n\nselfWorker.onmessage = (event: MessageEvent) => {\n  const { type, props = {} } = event.data as {\n    type: WorkerMessageType;\n    props: any;\n  };\n  switch (type) {\n    case WorkerMessageType.INIT:\n      const { worldParams = {}, config = {} } = props as PhysicsProps;\n      const {\n        maxNumberOfDynamicObjects = 100,\n        updateRate = 1000 / 30,\n      } = config;\n      render(\n        createElement(\n          require('./app/index').App,\n          {\n            worker: selfWorker,\n            config: {\n              maxNumberOfDynamicObjects,\n              updateRate,\n            },\n            worldParams,\n          },\n          null\n        )\n      );\n      break;\n  }\n};\n"],"names":["WorkerMessageType","WorkerOwnerMessageType","self","$RefreshReg$","$RefreshSig$","selfWorker","onmessage","event","data","type","props","INIT","worldParams","config","maxNumberOfDynamicObjects","updateRate","render","createElement","require","App","worker"],"mappings":";;;AAEA,IAAYA,iBAAZ;;AAAA,WAAYA;AACVA,EAAAA,gDAAA,SAAA;AACAA,EAAAA,gDAAA,SAAA;AACAA,EAAAA,uDAAA,gBAAA;AACAA,EAAAA,oDAAA,aAAA;AACAA,EAAAA,uDAAA,gBAAA;AACAA,EAAAA,oDAAA,aAAA;AACAA,EAAAA,uDAAA,gBAAA;AACAA,EAAAA,kEAAA,2BAAA;AACAA,EAAAA,6DAAA,sBAAA;AACD,CAVD,EAAYA,iBAAiB,KAAjBA,iBAAiB,KAAA,CAA7B;;AAYA,IAAYC,sBAAZ;;AAAA,WAAYA;AACVA,EAAAA,2DAAA,UAAA;AACAA,EAAAA,kEAAA,iBAAA;AACAA,EAAAA,iEAAA,gBAAA;AACAA,EAAAA,qEAAA,oBAAA;AACAA,EAAAA,mEAAA,kBAAA;AACAA,EAAAA,6DAAA,YAAA;AACAA,EAAAA,+DAAA,cAAA;AACD,CARD,EAAYA,sBAAsB,KAAtBA,sBAAsB,KAAA,CAAlC;;ACdA;AACA;AAKCC,IAAY,CAACC,YAAb,GAA4B,cAA5B;;AACAD,IAAY,CAACE,YAAb,GAA4B;AAAA,SAAM,cAAN;AAAA,CAA5B;;AAED,IAAMC,UAAU,GAAIH,IAApB;;AAEAG,UAAU,CAACC,SAAX,GAAuB,UAACC,KAAD;oBACQA,KAAK,CAACC;MAA3BC,mBAAAA;sCAAMC;MAAAA,uCAAQ;;AAItB,UAAQD,IAAR;AACE,SAAKT,iBAAiB,CAACW,IAAvB;AAAA,+BAC4CD,KAD5C,CACUE,WADV;AAAA,UACUA,WADV,mCACwB,EADxB;AAAA,0BAC4CF,KAD5C,CAC4BG,MAD5B;AAAA,UAC4BA,MAD5B,8BACqC,EADrC;AAAA,kCAKMA,MALN,CAGIC,yBAHJ;AAAA,UAGIA,yBAHJ,sCAGgC,GAHhC;AAAA,+BAKMD,MALN,CAIIE,UAJJ;AAAA,UAIIA,UAJJ,mCAIiB,OAAO,EAJxB;AAMEC,MAAAA,MAAM,CACJC,aAAa,CACXC,OAAO,CAAC,aAAD,CAAP,CAAuBC,GADZ,EAEX;AACEC,QAAAA,MAAM,EAAEf,UADV;AAEEQ,QAAAA,MAAM,EAAE;AACNC,UAAAA,yBAAyB,EAAzBA,yBADM;AAENC,UAAAA,UAAU,EAAVA;AAFM,SAFV;AAMEH,QAAAA,WAAW,EAAXA;AANF,OAFW,EAUX,IAVW,CADT,CAAN;AAcA;AArBJ;AAuBD,CA5BD"}